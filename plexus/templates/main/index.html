{% extends 'base.html' %}

{% block content %}

<h1>Servers</h1>
<table class="table table-striped table-condensed table-bordered">
	<thead>
		<tr>
			<th>name</th>
			<th>primary function</th>
			<th>ip addresses</th>
			<th>location</th>
			<th>OS</th>
			<th>mem</th>
			<th>disk</th>
		</tr>
	</thead>
		
	<tbody>
		{% for server in servers %}
		<tr>
			<td><a href="/server/{{server.id}}/">{{server.name}}</a></td>
			<td>{{server.primary_function}}</td>
			<td>
				{% for ip in server.ipaddress_set.all %}
				{{ip.ipv4}}
				{% endfor %}
</td>
			<td>
				{% if server.virtual %}
				[Virtual: {% for vm in server.dom_u.all %}{{vm.dom_0.name}}{% endfor %}]
				{% else %}
				{{server.location.name}}
				{% endif %}
			</td>
			<td>{{server.operating_system.family.name}}
				{{server.operating_system.version}}</td>
			<td>{{server.memory}} [{{server.swap}}]</td>
			<td>{{server.disk}}</td>

		</tr>
		{% endfor %}
	</tbody>

</table>
{% if request.user.is_staff %}
<p><a href="/add_server/" class="btn">Add Server</a></p>
{% endif %}

<h1>Aliases</h1>
<table class="table table-striped table-condensed table-bordered">
	<thead>
		<tr>
			<th>alias</th>
			<th>description</th>
			<th>server</th>
			<th>contacts</th>
		</tr>
	</thead>
		
	<tbody>
		{% for alias in aliases %}
		<tr class="{{alias.status_css_class}}">
			<td><a href="/alias/{{alias.id}}/">{{alias.hostname}}</a></td>
			<td>{{alias.description}}</td>
			<td><a href="/server/{{alias.ip_address.server.id}}/">{{alias.ip_address.server.name}}</a></td>
			<td>
				{% for ac in alias.aliascontact_set.all %}
				<a href="/contact/{{ac.contact.id}}/">{{ac.contact.name}}</a>
				{% endfor %}
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>

{% endblock %}
